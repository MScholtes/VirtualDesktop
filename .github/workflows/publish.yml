name: Publish

on:
  push:
    tags:
      - v*

jobs:
  build:
    runs-on: windows-latest

    steps:
    - uses: actions/checkout@v3
    - name: Setup MSBuild
      uses: microsoft/setup-msbuild@v1
    - name: Compile
      shell: bash
      run:
         |
        for FILE in *.cs
        do
            csc.exe "$FILE" /win32icon:"MScholtes.ico"
        done
    - name: Release
      uses: softprops/action-gh-release@v1
      with:
        files: "*.exe" 